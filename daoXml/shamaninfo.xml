<?xml version="1.0" encoding="UTF-8"?>
<data>

	<insert id="shamanInfoInsert" desc="점집정보 입력">
		<table>shamanInfo</table>
		<field>
			<item>SHId</item>
			<item>name</item>
			<item>SHPwd</item>
			<item>SHName</item>
			<item>SHPhone</item>
			<item>SHAddress</item>
			<item>SHLng</item>
			<item>SHLat</item>
			<item>SHStatus</item>
			<item>writeDate</item>
			<item>SHZipcode</item>
			<item>SHAddress2</item>
		</field>
	</insert>

	<insert id="shamanInfoInsertFront" desc="점집정보 입력">
		<table>shamanInfo</table>
		<field>
			<item>SHId</item>
			<item>name</item>
			<item>SHPwd</item>
			<item>SHName</item>
			<item>SHPhone</item>
			<item>SHAddress</item>
			<item>SHLng</item>
			<item>SHLat</item>
			<item>SHStatus</item>
			<item>writeDate</item>
			<item>SHZipcode</item>
			<item>SHAddress2</item>
			<item>SHEmail</item>
		</field>
	</insert>

	<update id="shamanInfoUpdate" desc="점집정보 수정">
		<table>shamanInfo</table>
		<field>
			<item>name</item>
			<item>SHName</item>
			<item>SHTel</item>
			<item>SHPhone</item>
			<item>SHAddress</item>
			<item>SHLng</item>
			<item>SHLat</item>
			<item>SHDesc</item>
			<item>SHWord</item>
			<item>SHStartTime</item>
			<item>SHEndTime</item>
			<item>SHZipcode</item>
			<item>SHAddress2</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</update>

	<update id="shamanInfoUpdateMng" desc="점집정보 수정">
		<table>shamanInfo</table>
		<field>
			<item>name</item>
			<item>SHName</item>
			<item>SHTel</item>
			<item>SHPhone</item>
			<item>SHAddress</item>
			<item>SHLng</item>
			<item>SHLat</item>
			<item>SHDesc</item>
			<item>SHStartTime</item>
			<item>SHEndTime</item>
			<item>SHPwd</item>
			<item>SHZipcode</item>
			<item>SHAddress2</item>
			<item>SHWord</item>
			<item>SHRestSTime</item>
			<item>SHRestETime</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</update>

	<update id="shamanApply" desc="점집정보 승인">
		<table>shamanInfo</table>
		<field>
			<item>SHStatus</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</update>

	<update id="shamanApply2" desc="점집정보 승인">
		<table>shamanInfo</table>
		<field>
			<item>SHApply</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</update>

	<delete id="shamanInfoDelete" desc="점집정보 탈퇴">
		<table>shamanInfo</table>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</delete>

	<select id="shamanCnt" desc="점집유무 판단">
		<table>shamanInfo</table>
		<field>
			<item>
			<![CDATA[
				COUNT(*) as shamanCnt
			]]>
			</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId AND SHStatus = 'U'
		]]>
		</where>
	</select>
	<select id="shamanJoinCnt" desc="점집유무 판단">
		<table>shamanInfo</table>
		<field>
			<item>
			<![CDATA[
				COUNT(*) as shamanCnt
			]]>
			</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</select>

	<select id="shamanLoginInfo" desc="점집 로그인 정보">
		<table>shamanInfo</table>
		<field>
			<item>SHId</item>
			<item>SHPwd</item>
			<item>name</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</select>

	<select id="shamanModify" desc="점집정보 수정 정보추출">
		<table>shamanInfo</table>
		<field>
			<item>idx</item>
			<item>SHId</item>
			<item>SHPwd</item>
			<item>name</item>
			<item>SHName</item>
			<item>SHTel</item>
			<item>SHPhone</item>
			<item>SHZipcode</item>
			<item>SHAddress</item>
			<item>SHAddress2</item>
			<item>SHLng</item>
			<item>SHLat</item>
			<item>SHDesc</item>
			<item>SHStartTime</item>
			<item>SHEndTime</item>
			<item>SHStatus</item>
			<item>writeDate</item>
			<item>SHWord</item>
			<item>SHRestSTime</item>
			<item>SHRestETime</item>
			<item>SHEmail</item>
			<item>SHApply</item>
		</field>
		<where>
		<![CDATA[
			SHId=:SHId
		]]>
		</where>
	</select>
	<select id="shamanList" desc="점집리스트">
		<table>shamanInfo</table>
		<field>
			<item>idx</item>
			<item>SHName</item>
			<item>SHLng</item>
			<item>SHLat</item>
			<item>SHDesc</item>
			<item>SHId</item>
		</field>
		<where>
			SHStatus = 'U'
		</where>
	</select>
	<select id="shamanListMng" desc="점집관리자리스트">
		<table>shamanInfo</table>
		<field>
			<item>idx</item>
			<item>SHName</item>
			<item>SHId</item>
			<item>SHPhone</item>
			<item>SHStatus</item>
			<item>writeDate</item>
		</field>
		<where>
		<![CDATA[
			1=1
		]]>
		</where>
	</select>
	<select id="shamanTotalCnt" desc="무속인수">
		<table>shamanInfo</table>
		<field>
			<item>
			<![CDATA[
				COUNT(*) as shamanCnt
			]]>
			</item>
		</field>
		<where>
		<![CDATA[
			1=1
		]]>
		</where>
	</select>
	<select id="getShamanName" desc="점집명 추출">
		<table>shamanInfo</table>
		<field>
			<item>SHId</item>
			<item>SHPwd</item>
			<item>name</item>
			<item>SHName</item>
			<item>SHTel</item>
			<item>SHPhone</item>
			<item>SHZipcode</item>
			<item>SHAddress</item>
			<item>SHAddress2</item>
			<item>SHLng</item>
			<item>SHLat</item>
			<item>SHDesc</item>
			<item>SHStartTime</item>
			<item>SHEndTime</item>
			<item>SHStatus</item>
			<item>writeDate</item>
		</field>
		<where>
		<![CDATA[
			idx=:SHIdx
		]]>
		</where>
	</select>
	<select id="getShamanNamePay" desc="점집명 추출">
		<table>
		<![CDATA[
			shamanInfo as a, payment as b, reservation as c
		]]>
		</table>
		<field>
			<item>SHName</item>
			<item>name</item>
		</field>
		<where>
		<![CDATA[
			a.idx = c.SHIdx AND b.idx = c.paymentIdx AND b.idx=:idx
		]]>
		</where>
	</select>

	<select id="searchShamanTotalCnt" desc="검색 점집">
		<table>
		<![CDATA[
			shamanInfo AS a, shamanProductRelay AS b, product AS c
		]]>
		</table>
		<field>
			<item>
			<![CDATA[
				COUNT(Distinct SHId) as shamanCnt
			]]>
			</item>
		</field>
		<where>
		<![CDATA[
			 a.idx = b.SHIdx AND  b.proIdx = c.idx AND a.SHstatus = 'U'
		]]>
		</where>
	</select>

	<select id="searchShamanList" desc="검색 점집 리스트">
		<table>
		<![CDATA[
			shamanInfo AS a, shamanProductRelay AS b, product AS c
		]]>
		</table>
		<field>
			<item>
			<![CDATA[
				a.idx as SHIdx
			]]>
			</item>
			<item>SHName</item>
			<item>SHAddress</item>
			<item>SHLng</item>
			<item>SHDesc</item>
			<item>SHLat</item>
			<item>
			<![CDATA[
				a.SHId
			]]>
			</item>
			<item>SHTel</item>
			<item>SHStatus</item>
			<item>SHApply</item>
			<item>
			<![CDATA[
				b.price as prdPrice
			]]>
			</item>
		</field>
		<where>
		<![CDATA[
			 a.idx = b.SHIdx AND  b.proIdx = c.idx AND a.SHstatus = 'U'
		]]>
		</where>
	</select>
</data> 